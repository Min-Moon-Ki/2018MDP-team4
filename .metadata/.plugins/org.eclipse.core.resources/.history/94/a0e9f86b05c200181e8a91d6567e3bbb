package testing;

import java.util.Scanner;

import d20180312.Bluetooth;
import d20180312.FPGA_Bluetooth;

public class blue {

	String str;
	
	blue() {
		Bluetooth bt = new FPGA_Bluetooth();
		
		bt.connectBluetooth("4JO");
		
		Scanner kb = new Scanner(System.in);
		new Thread() {
			String t = null;
			Byte by = 0;
			@Override
			public void run() {
				while(true) {
					if(str != null) {
						
						by = toByte(str);
						bt.writeData(by);
					}
				}
			}
		}.start();
		while(true) {
			str = kb.nextLine();
		}
	}
	
	public static void main(String[] args) {
		new blue();
	}
	
	private byte toByte(String msg) {	
		byte b = 0;
		char[] ch = msg.toCharArray();
		for(int i = 0; i < ch.length; i++) {
			if(i > 7) break;
			else b += (ch[i]-'0') * Math.pow(2, - (i - 7));
		}
		return b;
	}
	
	private String convertAngle(String angle) {	 
		StringBuilder sb = new StringBuilder();
		int ang = 0;
		char[] ch = angle.toCharArray();
		for(int i = 0; i < ch.length; i++) ang += (ch[i]-'0') * Math.pow(10, i);

		/*
		sb.append(ang%2);
		sb.append(ang/2%2);
		sb.append(ang/4%2);
		sb.append(ang/8%2);
		*/
		
		for(int i = 0; i < 4; i++) {
			sb.append((ang / (int)Math.pow(2,i))%2);
		}
		
		return sb.reverse().toString();
	}
}
